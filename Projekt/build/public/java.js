"use strict";var B=(E,S,i)=>new Promise((y,h)=>{var g=t=>{try{c(i.next(t))}catch(p){h(p)}},l=t=>{try{c(i.throw(t))}catch(p){h(p)}},c=t=>t.done?y(t.value):Promise.resolve(t.value).then(g,l);c((i=i.apply(E,S)).next())});function C(){fetch("/api/dataEvent").then(E=>E.json()).then(E=>{let S=JSON.stringify(E),i=JSON.parse(S),y=document.getElementById("data-event");for(let h=0;h<i.filteredEvents.length;h++){let g=y.insertRow(),l=g.insertCell(0),c=g.insertCell(1),t=g.insertCell(2);l.innerHTML=i.filteredEvents[h].name,c.innerHTML=i.filteredEvents[h].date,t.innerHTML=i.filteredEvents[h].roomNumber}})}C();function j(){fetch("/api/dataEvent").then(E=>E.json()).then(E=>{let S=JSON.stringify(E),i=JSON.parse(S),y=document.getElementById("data-guest");for(let h=0;h<i.filteredGuests.length;h++){let g=y.insertRow(),l=g.insertCell(0),c=g.insertCell(1),t=g.insertCell(2);l.innerHTML=i.filteredGuests[h].name,c.innerHTML=i.filteredGuests[h].child,t.innerHTML=i.filteredGuests[h].status}})}j();function H(E){return B(this,null,function*(){let i=yield(yield fetch("/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).json();return console.log(i),i})}function M(){fetch("/api/dataEvent").then(E=>E.json()).then(E=>{let S=JSON.stringify(E),i=JSON.parse(S);if(i.filteredGuests.length!==0)for(let l=0;l<i.filteredGuests.length;l++){let c=document.getElementById("gie"),t=document.createElement("option");t.value=i.filteredGuests[l]._id,t.innerHTML=i.filteredGuests[l].name,c.appendChild(t)}let y=i.filteredGuests[0],h=document.getElementById("guestevent"),g=0;for(let l=0;l<i.filteredEvents.length;l++){let c=!1;for(let t=0;t<i.filteredEvents[l].seatingPlan.length;t++)String(y._id)===String(i.filteredEvents[l].seatingPlan[t].seatedBy)&&(c=!0);if(c===!1){let t=document.createElement("option");t.value=i.filteredEvents[l]._id,t.innerHTML=i.filteredEvents[l].name,h.appendChild(t),g++}}if(g>0){let l=document.getElementById("rooms"),c;for(let o=0;o<i.filteredEvents.length;o++)if(String(i.filteredEvents[o]._id)===String(h[0].value)){c=i.filteredEvents[o];break}for(let o=0;o<c.roomNumber.length;o++){let d=document.createElement("option");console.log(c.roomNumber[o]+" "+o),d.value=c.roomNumber[o],d.innerHTML=c.roomNumber[o],l.appendChild(d)}let t=c.roomNumber[0],p;for(let o=0;o<i.rooms.length;o++)if(i.rooms[o].number===t){p=i.rooms[o];break}let v=document.getElementById("seatTable");for(let o=0;o<p.tables.length;o++){let d=document.createElement("option");d.value=p.tables[o].number,d.innerHTML=o+1,v.appendChild(d)}let N=document.getElementById("seatSeat");N.options.length=0;let O=[];console.log(c),console.log(c.seatingPlan.length);for(let o=0;o<c.seatingPlan.length;o++)console.log(c.seatingPlan[0].seatNumber),O.push(c.seatingPlan[o].seatNumber);console.log(O);for(let o=0;o<p.tables[0].seatsAvailable;o++){let d=!1;for(let a=0;a<O.length;a++)Number(O[a])===Number(o+1)&&(d=!0);if(d===!1){let a=document.createElement("option"),f=o+1;a.value=f,a.innerHTML=o+1,N.appendChild(a)}}}})}M();window.onload=function(){document.getElementById("guestevent").addEventListener("change",function(g){fetch("/api/dataEvent").then(l=>l.json()).then(l=>{let c=JSON.stringify(l),t=JSON.parse(c),p,v=g.target,N=v.selectedIndex,o=v.options[N].value,d,a;for(let n=0;n<t.filteredEvents.length;n++)if(String(o)===String(t.filteredEvents[n]._id)){a=t.filteredEvents[n],p=t.filteredEvents[n].roomNumber[0],d=t.filteredEvents[n];break}let f=document.getElementById("rooms");f.options.length=0;for(let n=0;n<d.roomNumber.length;n++){let b=document.createElement("option");b.value=d.roomNumber[n],b.innerHTML=d.roomNumber[n],f.appendChild(b)}let m;for(let n=0;n<t.rooms.length;n++)if(t.rooms[n].number===p){m=t.rooms[n];break}let u=document.getElementById("seatTable");u.options.length=0;for(let n=0;n<m.tables.length;n++){let b=document.createElement("option");b.value=m.tables[n].number,b.innerHTML=n+1,u.appendChild(b)}let e=document.getElementById("seatSeat");e.options.length=0;let r=[];for(let n=0;n<a.seatingPlan.length;n++)console.log(a.seatingPlan[0].seatNumber),r.push(a.seatingPlan[n].seatNumber);console.log(r);for(let n=0;n<m.tables[0].seatsAvailable;n++){let b=!1;for(let s=0;s<r.length;s++)Number(r[s])===Number(n+1)&&(b=!0);if(b===!1){let s=document.createElement("option"),T=n+1;s.value=T,s.innerHTML=n+1,e.appendChild(s)}}})}),document.getElementById("gie").addEventListener("change",function(g){fetch("/api/dataEvent").then(l=>l.json()).then(l=>{let c=JSON.stringify(l),t=JSON.parse(c),p=g.target,v=p.selectedIndex,o=p.options[v].value,d=document.getElementById("guestevent");d.options.length=0;let a;for(let m=0;m<t.filteredEvents.length;m++){let u=!1;for(let e=0;e<t.filteredEvents[m].seatingPlan.length;e++)String(o)===String(t.filteredEvents[m].seatingPlan[e].seatedBy)&&(u=!0);if(u===!1){let e=document.createElement("option");e.value=t.filteredEvents[m]._id,e.innerHTML=t.filteredEvents[m].name,d.appendChild(e)}}let f;if(typeof d[0]!="undefined"){for(let s=0;s<t.filteredEvents.length;s++)String(d[0].value)===String(t.filteredEvents[s]._id)&&(a=t.filteredEvents[s],f=t.filteredEvents[s]);let m=f.roomNumber[0],u=document.getElementById("rooms");u.options.length=0;for(let s=0;s<f.roomNumber.length;s++){let T=document.createElement("option");T.value=f.roomNumber[s],T.innerHTML=f.roomNumber[s],u.appendChild(T)}let e;for(let s=0;s<t.rooms.length;s++)if(t.rooms[s].number===m){e=t.rooms[s];break}let r=document.getElementById("seatTable");r.options.length=0;for(let s=0;s<e.tables.length;s++){let T=document.createElement("option");T.value=e.tables[s].number,T.innerHTML=s+1,r.appendChild(T)}let n=document.getElementById("seatSeat");n.options.length=0;let b=[];for(let s=0;s<a.seatingPlan.length;s++)console.log(a.seatingPlan[0].seatNumber),b.push(a.seatingPlan[s].seatNumber);console.log(b);for(let s=0;s<e.tables[0].seatsAvailable;s++){let T=!1;for(let I=0;I<b.length;I++)Number(b[I])===Number(s+1)&&(T=!0);if(T===!1){let I=document.createElement("option"),L=s+1;I.value=L,I.innerHTML=s+1,n.appendChild(I)}}}else{let m=document.getElementById("rooms");m.options.length=0;let u=document.getElementById("seatTable");u.options.length=0;let e=document.getElementById("seatSeat");e.options.length=0}})}),document.getElementById("rooms").addEventListener("change",function(g){fetch("/api/dataEvent").then(l=>l.json()).then(l=>{let c=JSON.stringify(l),t=JSON.parse(c),p=g.target,v=p.selectedIndex,O=p.options[v].value,o;for(let e=0;e<t.rooms.length;e++)if(Number(t.rooms[e].number)===Number(O)){o=t.rooms[e];break}let d=document.getElementById("seatTable");d.options.length=0;for(let e=0;e<o.tables.length;e++){let r=document.createElement("option");r.value=o.tables[e].number,r.innerHTML=e+1,d.appendChild(r)}let a=document.getElementById("event-form");console.log(a.elements);let f;for(let e=0;e<t.filteredEvents.length;e++)String(a.elements.guestevent.value)===String(t.filteredEvents[e]._id)&&(f=t.filteredEvents[e]);let m=document.getElementById("seatSeat");m.options.length=0;let u=[];for(let e=0;e<f.seatingPlan.length;e++)console.log(f.seatingPlan[0].seatNumber),u.push(f.seatingPlan[e].seatNumber);console.log(u);for(let e=0;e<o.tables[0].seatsAvailable;e++){let r=!1;for(let n=0;n<u.length;n++)Number(u[n])===Number(e+1)&&(r=!0);if(r===!1){let n=document.createElement("option"),b=e+1;n.value=b,n.innerHTML=e+1,m.appendChild(n)}}})}),document.getElementById("seatTable").addEventListener("change",function(g){fetch("/api/dataEvent").then(l=>l.json()).then(l=>{let c=JSON.stringify(l),t=JSON.parse(c),p=g.target,v=p.selectedIndex,O=p.options[v].value,o=document.getElementById("seatSeat");o.options.length=0;let d;for(let e=0;e<t.rooms.length;e++)for(let r=0;r<t.rooms[e].tables.length;r++)if(Number(O)===Number(t.rooms[e].tables[r].number)){d=t.rooms[e];break}let a=document.getElementById("seatTable");a.options.length=0;for(let e=0;e<d.tables.length;e++){let r=document.createElement("option");r.value=d.tables[e].number,r.innerHTML=e+1,a.appendChild(r)}let f=document.getElementById("event-form");console.log(f.elements);let m;for(let e=0;e<t.filteredEvents.length;e++)String(f.elements.guestevent.value)===String(t.filteredEvents[e]._id)&&(m=t.filteredEvents[e]);let u=[];for(let e=0;e<m.seatingPlan.length;e++)console.log(m.seatingPlan[0].seatNumber),u.push(m.seatingPlan[e].seatNumber);for(let e=0;e<d.tables[0].seatsAvailable;e++){let r=!1;for(let n=0;n<u.length;n++)Number(u[n])===Number(e+1)&&(r=!0);if(r===!1){let n=document.createElement("option"),b=e+1;n.value=b,n.innerHTML=e+1,o.appendChild(n)}}})}),document.getElementById("edate").addEventListener("change",function(){let g=document.getElementById("contain");g.innerHTML="",fetch("/api/dataEvent").then(l=>l.json()).then(l=>{let c=JSON.stringify(l),t=JSON.parse(c),v=document.getElementById("edate").value;console.log(v);let N=!1,O=new Date(v),o;t.rooms.length!==0&&H({da:O}).then(d=>{if(o=d,o.rooms.length>0&&(N=!0),o.rooms.length!==t.rooms.length){if(N===!0){let a=document.createElement("select");a.id="roomforevent",a.name="roomforevent",a.multiple=!0;let f=!1;for(let r=0;r<t.rooms.length;r++){for(let n=0;n<o.rooms.length;n++)Number(o.rooms[n])===Number(t.rooms[r].number)&&(f=!0);if(f===!1){let n=document.createElement("option");n.value=t.rooms[r].number,n.innerHTML=t.rooms[r].number,a.appendChild(n)}f=!1}let m=document.createElement("label");m.innerHTML="Room";let u=document.getElementById("contain");u.appendChild(m),u.appendChild(a);let e=document.createElement("input");e.type="submit",e.value="Submit",u.appendChild(e)}else if(t.rooms.length!==0){let a=document.createElement("select");a.id="roomforevent",a.name="roomforevent",a.multiple=!0;for(let e=0;e<t.rooms.length;e++){let r=document.createElement("option");r.value=t.rooms[e].number,r.innerHTML=t.rooms[e].number,a.appendChild(r)}let f=document.createElement("label");f.innerHTML="Room";let m=document.getElementById("contain");m.appendChild(f),m.appendChild(a);let u=document.createElement("input");u.type="submit",u.id="submit",u.value="Submit",m.appendChild(u)}}}).catch(d=>{console.error(d)})})})};
